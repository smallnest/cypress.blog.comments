<!doctype html><html lang=en><head><meta charset=utf-8><meta name=generator content="Hugo 0.141.0"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content><meta property="og:url" content="https://cypress.rpcx.io/posts/write-idiomatic-go-code-ch1/"><link rel=canonical href=https://cypress.rpcx.io/posts/write-idiomatic-go-code-ch1/><link rel=alternate type=application/atom+xml href=https://cypress.rpcx.io/index.xml title="cypress's blog"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/cypress.rpcx.io\/"},"articleSection":"posts","name":"编写地道的Go代码：第一章 命名规范","headline":"编写地道的Go代码：第一章 命名规范","description":"编写地道的Go代码： 命名规范","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2025","datePublished":"2025-01-17 12:16:41 \u002b0800 CST","dateModified":"2025-01-17 12:16:41 \u002b0800 CST","url":"https:\/\/cypress.rpcx.io\/posts\/write-idiomatic-go-code-ch1\/","keywords":[]}</script><title>编写地道的Go代码：第一章 命名规范</title>
<meta property="og:title" content="编写地道的Go代码：第一章 命名规范"><meta property="og:type" content="article"><meta property="og:description" content="编写地道的Go代码： 命名规范"><meta name=description content="编写地道的Go代码： 命名规范"><meta property="og:locale" content="zh_CN"><meta property="og:image" content><style>body{font-family:bree serif,serif;-webkit-font-smoothing:antialiased;margin:0 20px}article{max-width:800px;margin-left:auto;margin-right:auto}a{color:#000;text-decoration:none}a:hover{font-weight:600;text-decoration:underline}.post-ads{margin:50px 0}.markdown-body{font-size:18px;max-width:100%}.markdown-body a{text-decoration:underline;text-decoration-color:#000}.markdown-body blockquote{margin:0;padding:0 1em;color:#57606a;border-left:.25em solid #d0d7de}.markdown-body pre{padding:16px;overflow:auto;border-radius:10px}.markdown-body code{padding:.2em .4em;font-size:85%;background-color:#f6f8fa;border-radius:6px}.markdown-body pre>code{padding:0;font-size:100%;background-color:inherit;border:0}.Chinese .markdown-body{line-height:200%}.site-date-catalog{font-size:2rem}.header-title{font-size:2rem;font-weight:700;margin-top:32px;font-family:sans-serif}.header-title a{text-decoration:none}.header-subtitle{color:#666}.header-items{margin:10px 0}.header-item{margin:0 5px}.header-line{width:100%;border-width:2px;border-color:#482936;border-style:solid none none none}.lang-switch{font-weight:600}#posts-list{min-height:600px}.posts-line{font-size:1.2rem;margin:12px 0}.posts-categories{font-size:.8rem;margin:auto;text-align:center}.posts-category{padding:3px 0;border:#bbb 2px solid;border-radius:5px}.posts-category a{color:#bbb;text-decoration:none}.posts-category a:hover{color:#888;border-color:#888}.site-footer{margin-top:50px}.site-footer-item{margin-right:12px}.post-header{margin-bottom:50px}.post-title{font-size:2rem;font-weight:600}.post-tags{display:inline;font-weight:600;padding:1px 5px;margin-right:6px;border:#bbb 2px solid;border-radius:5px;color:#bbb}.post-tags a{color:#bbb;text-decoration:none}.post-tags a:hover{color:#888;border-color:#888}.post-date{font-weight:800;font-style:italic}.post-author{float:right;font-weight:600}.reading-time{color:#bbb;text-align:right}.page-content{min-height:60%}.post-content{margin-bottom:50px}.post-content p{hyphens:auto;line-height:1.8;text-justify:ideographic;margin-bottom:1em}.post-content img{max-width:100%;display:block;margin-right:auto;margin-top:6px}.post-content .post-gallery{display:flex;flex-wrap:wrap;gap:6px}.post-content .post-gallery img{margin-right:auto;margin-top:auto;width:calc(50% - 3px)}.related-content{border-width:1px;border-style:solid;border-color:#e6e6e6;padding:0 10px;margin-bottom:50px;margin-top:100px}.related-content li{margin:5px 0}.taxonomy-term{font-size:3rem}.gallery-img{text-align:center}.gallery-img span{text-align:center}.gallery-img-desc{font-size:.8em;font-weight:800}.bilibili-frame{width:100%;height:auto;margin:0 auto;display:block}#disqus_thread{position:relative}#disqus_thread:after{content:"";display:block;height:55px;width:100%;position:absolute;bottom:0;background:#fff}@media screen and (max-width:600px){.header-title,.header-subtitle,.header-items{}.posts-line{font-size:16px}.markdown-body{font-size:16px}.post-title{font-size:2rem}.post-content p{letter-spacing:.05em}.post-content .post-gallery img{width:100%}}@media screen and (max-width:48em){.posts-category{display:none}}</style><style>.container,.container-fluid{margin-right:auto;margin-left:auto}.container-fluid{padding-right:2rem;padding-left:2rem}.row{box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 1 auto;flex:initial;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-.5rem;margin-left:-.5rem}.row.reverse{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.col.reverse{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.col-xs,.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-offset-0,.col-xs-offset-1,.col-xs-offset-10,.col-xs-offset-11,.col-xs-offset-12,.col-xs-offset-2,.col-xs-offset-3,.col-xs-offset-4,.col-xs-offset-5,.col-xs-offset-6,.col-xs-offset-7,.col-xs-offset-8,.col-xs-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-xs{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-xs-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-xs-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-xs-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-xs-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-xs-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-xs-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-xs-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-xs-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-xs-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-xs-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-xs-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-xs-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-xs-offset-0{margin-left:0}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-11{margin-left:91.66666667%}.start-xs{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-xs{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-xs{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-xs{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-xs{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-xs{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-xs{-ms-flex-pack:distribute;justify-content:space-around}.between-xs{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-xs{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-xs{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}@media only screen and (min-width:48em){.container{width:49rem}.col-sm,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-offset-0,.col-sm-offset-1,.col-sm-offset-10,.col-sm-offset-11,.col-sm-offset-12,.col-sm-offset-2,.col-sm-offset-3,.col-sm-offset-4,.col-sm-offset-5,.col-sm-offset-6,.col-sm-offset-7,.col-sm-offset-8,.col-sm-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-sm{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-sm-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-sm-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-sm-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-sm-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-sm-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-sm-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-sm-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-sm-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-sm-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-sm-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-sm-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-sm-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-sm-offset-0{margin-left:0}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-11{margin-left:91.66666667%}.start-sm{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-sm{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-sm{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-sm{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-sm{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-sm{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-sm{-ms-flex-pack:distribute;justify-content:space-around}.between-sm{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-sm{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-sm{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}}@media only screen and (min-width:64em){.container{width:65rem}.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-offset-0,.col-md-offset-1,.col-md-offset-10,.col-md-offset-11,.col-md-offset-12,.col-md-offset-2,.col-md-offset-3,.col-md-offset-4,.col-md-offset-5,.col-md-offset-6,.col-md-offset-7,.col-md-offset-8,.col-md-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-md{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-md-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-md-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-md-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-md-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-md-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-md-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-md-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-md-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-md-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-md-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-md-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-md-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-md-offset-0{margin-left:0}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-3{margin-left:25%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-6{margin-left:50%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-9{margin-left:75%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-11{margin-left:91.66666667%}.start-md{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-md{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-md{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-md{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-md{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-md{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-md{-ms-flex-pack:distribute;justify-content:space-around}.between-md{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-md{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-md{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}}@media only screen and (min-width:75em){.container{width:76rem}.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-offset-0,.col-lg-offset-1,.col-lg-offset-10,.col-lg-offset-11,.col-lg-offset-12,.col-lg-offset-2,.col-lg-offset-3,.col-lg-offset-4,.col-lg-offset-5,.col-lg-offset-6,.col-lg-offset-7,.col-lg-offset-8,.col-lg-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-lg{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-lg-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-lg-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-lg-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-lg-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-lg-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-lg-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-lg-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-lg-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-lg-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-lg-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-lg-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-lg-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-lg-offset-0{margin-left:0}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-11{margin-left:91.66666667%}.start-lg{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-lg{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-lg{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-lg{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-lg{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-lg{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-lg{-ms-flex-pack:distribute;justify-content:space-around}.between-lg{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-lg{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-lg{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}}</style><link rel=stylesheet href=/css/syntax.css><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS_HTML" async></script><script type=text/x-mathjax-config>
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'a']
        },
        messageStyle: "none",
        showProcessingMessages: false,
        MathMenu: {
            showLocale: false,
            showRenderer: false
        }
    });
  </script><script src=https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js></script><link href=/index.xml rel=alternate type=application/rss+xml title="cypress's blog"><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css?family=Bree+Serif" rel=stylesheet></head><body><article class=post id=article><div class=row><div class=col-xs-12><div class=site-header><header><div class=header-title><a href=/>Cypress (落羽杉)</a></div><div class=header-subtitle></div></header><div class="row end-md header-items"><div class=header-item><a href=https://colobu.com/about/ target=_blank>About</a></div><div class=header-item><a href=https://github.com/smallnest target=_blank>Github</a></div><div class=header-item width=40px><form method=get id=search-google action=http://www.google.com/search target=_blank><input type=hidden name=sitesearch value=cypress.rpcx.io><input type=text name=q style=width:80px maxlength=255 placeholder=Search class=form-control></form></div></div><div class=row></div><div class=header-line></div></div><header class=post-header><h1 class=post-title>编写地道的Go代码：第一章 命名规范</h1><div class="row post-desc"><div class=col-xs-6><time class=post-date datetime="2025-01-17 12:16:41 CST">17 Jan 2025</time></div><div class=col-xs-6><div class=reading-time>7 minutes</div></div></div></header><div class="post-content markdown-body"><p>Grady Booch 是一位在软件工程领域做出了杰出贡献的计算机科学家。他通过开发 UML、提出 Booch 方法以及撰写畅销书等方式，极大地推动了软件工程领域的发展，并对今天的软件开发实践产生了深远的影响。他关于整洁代码(clean code)一段描述非常得到大家的赞同：</p><blockquote><p>清晰的代码，简练而直白，读之如行云流水般的优美散文。它绝不故弄玄虚，而是以简洁的抽象和清晰的逻辑，淋漓尽致地展现设计者的匠心。</p></blockquote><p>这个系列就是介绍Go语言中几百个编写整洁代码的建议。我不把它们称作为编码规范或者最佳实践，而是把它们称之为建议，原因在于有些建议并不一定强调开发者必须遵守，而是在大部分情况下，这些建议的做法比较符合地道的Go编程写法。</p><p>我在实际的工作中，也看到很多初入Go语言领域编写应用程序的同学，或许他刚入门或者从其他语言刚转入到Go一两年，得益于 Go语言的简单易学，就非常快的编写了Go可运行的程序，这是非常好的一件事情，但是也看到代码中一些不是那么地道的Go语言写法，比如变量的命名很奇怪、打印error信息首字母大写等等，让人很容易识别出是Go语言初学者的痕迹。</p><p><img src=go.gif alt></p><p>所以我想通过一个简短的课程，给大家介绍一下Go语言中如何编写干净整洁，逻辑清晰的代码，让你的代码看起来就像专家写的。</p><p><strong>Go标准库是学习这些规范的最佳代码。</strong></p><p>首先第一课就是命名规范。</p><p>编程中的命名规范是一套规则，用于为代码中的各种元素（如变量、函数、类、文件等）选择名称。良好的命名规范可以提高代码的可读性、可维护性和团队协作效率。</p><p>但是，做到好命名并不是一件容易的事。</p><blockquote><p>There are only two hard things in Computer Science: cache invalidation and naming things.
&ndash; Phil Karlton</p><p>计算机科学中最难的两件事：缓存失效和命名。</p></blockquote><h3 id=基础规则>基础规则</h3><h4 id=1使用驼峰命名法公开函数首字母大写私有函数首字母小写><strong>1、使用驼峰命名法，公开函数首字母大写，私有函数首字母小写</strong></h4><p>这是 Go 语言中最基本的命名约定。公开的函数、类型、变量等可以被其他包访问，因此首字母需要大写；私有的则只能在包内部使用，首字母小写。</p><p><strong>示例：</strong></p><ul><li><p>公开函数：<code>io.Copy()</code></p></li><li><p>私有类型：<code>io.nopCloser</code></p></li></ul><h4 id=2接口名应以--er-结尾表示行为如readerwriter><strong>2、接口名应以 -er 结尾，表示行为，如Reader、Writer</strong></h4><p>通过 -er 后缀，可以直观地表明这是一个行为接口；符合英语语言习惯，容易理解和记忆；清晰地表达"能做什么"的概念。</p><p><strong>示例:</strong></p><ul><li><p><code>io.Reader</code>：定义了 <code>Read()</code> 方法，表示可以读取数据的对象</p></li><li><p><code>io.Writer</code>：定义了 <code>Write()</code> 方法，表示可以写入数据的对象</p></li><li><p><code>Closer</code>：定义了 <code>Close()</code> 方法，表示可关闭的对象。</p></li><li><p><code>Stringer</code>：定义了 <code>String()</code> 方法，表示可以格式化成字符串的对象。</p></li></ul><h4 id=3变量名应该简短且有意义><strong>3、变量名应该简短且有意义</strong></h4><p>变量名应该清晰地表达变量的用途，避免使用晦涩的缩写或无意义的名称。循环计数器通常可以使用 <code>i</code>、<code>j</code>、<code>k</code> 等单字母。特定的参数和变量也可以使用单字符，如<code>r</code>、<code>w</code>。</p><p><strong>示例:</strong></p><ul><li><p>临时变量<code>wt</code>, 如<code>wt, ok := src.(WriterTo)</code></p></li><li><p>简短有意义的变量<code>size</code>: <code>size := 32 * 1024</code></p></li><li><p>循环中的变量<code>i</code>：<code>for i := 0; i &lt; len(data); i++</code></p></li></ul><h4 id=4包名使用小写单词不使用下划线或混合大小写><strong>4、包名使用小写单词，不使用下划线或混合大小写</strong></h4><p>包名应该简洁明了，反映包的功能。尽量一个单词。</p><p><strong>示例:</strong></p><ul><li><p><code>net</code>、<code>bytes</code>、<code>http</code>、<code>hash</code>、<code>image</code>等</p></li><li><p>需要两个单词的，可以缩写，如<code>bufio</code>、<code>expvar</code>、<code>ioutil</code>、<code>strconv</code>等</p></li><li><p>不推荐，如<code>credentialprovider</code>、<code>serviceaccount</code></p></li></ul><h4 id=5常量名使用驼峰法><strong>5、常量名使用驼峰法</strong></h4><p>这种命名方式可以清晰地将常量与变量区分开。</p><p><strong>示例:</strong></p><ul><li><p>如<code>bufio.MaxScanTokenSize</code>、<code>net.IPv4len</code>、<code>io.SeekStart</code>等</p></li><li><p>全大写加下划线分隔如<code>MAX_CONNECTIONS</code>并不是Go语言命名常量地道的写法</p></li></ul><h4 id=6-名称要表明其用途避免无意义的别名><strong>6、</strong> <strong>名称要表明其用途,避免无意义的别名</strong></h4><p><strong>示例:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=c1>// 不好的例子，x,y含义不清晰
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>func</span><span class=w> </span><span class=n>process</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>int</span><span class=p>)</span><span class=w> </span><span class=n>int</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>y</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 好的例子
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>func</span><span class=w> </span><span class=n>calculateArea</span><span class=p>(</span><span class=n>length</span><span class=p>,</span><span class=w> </span><span class=n>width</span><span class=w> </span><span class=n>int</span><span class=p>)</span><span class=w> </span><span class=n>int</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>length</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>width</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h3 id=包名规范>包名规范</h3><h4 id=7包名应该简短明确比如nethttpbytes-同4><strong>7、包名应该简短、明确，比如net、http、bytes （同#4）</strong></h4><p><strong>示例:</strong></p><ul><li><p><code>net</code>: 这个包提供了网络相关的基本功能，例如TCP/IP、UDP、域名解析等。包名简洁明了，直接表达了其用途。例如，<code>net.Dial()</code> 函数用于建立网络连接。</p></li><li><p><code>http</code>: 这个包实现了HTTP客户端和服务端。例如，<code>http.ListenAndServe()</code> 用于启动HTTP服务器，<code>http.Get()</code> 用于发送HTTP GET请求。同样，包名非常清晰地表明了其功能。</p></li><li><p><code>bytes</code>: 这个包提供了操作字节切片的函数。例如，<code>bytes.Buffer</code> 类型用于高效地构建字节切片。包名简短且准确地描述了其操作的数据类型。</p></li></ul><h4 id=8避免使用commonutil这样笼统的包名><strong>8、避免使用common、util这样笼统的包名</strong></h4><p>Go标准库中没有使用 <code>common</code> 或 <code>util</code> 这样的包名。这是因为这些名称过于宽泛，无法清晰地表达包的功能。如果需要一些通用的工具函数，通常会根据其具体用途放到更具针对性的包中，或者如果确实非常通用，会考虑是否可以合并到已有的相关包里。</p><p><strong>示例:</strong></p><ul><li><p><code>ioutil</code>是和输入输出相关的工具包</p></li><li><p><code>httputil</code>是和http相关的工具包</p></li></ul><h4 id=9-包名和目录名保持一致><strong>9、 包名和目录名保持一致</strong></h4><p>Go的包管理机制要求包名和目录名保持一致。例如，<code>net</code> 包的代码位于 <code>$GOROOT/src/net</code> 目录下，<code>http</code> 包的代码位于 <code>$GOROOT/src/net/http</code> 目录下（注意http是net的子包）。这种约定使得代码组织清晰，易于查找和维护。</p><h4 id=10避免包名冲突必要时使用重命名导入><strong>10、避免包名冲突，必要时使用重命名导入</strong></h4><p>虽然Go的包路径包含了完整的导入路径（例如 <code>net/http</code>），但仍然可能存在不同模块的包名相同的情况。这时可以使用重命名导入来解决冲突。</p><p><strong>示例:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>import</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=s>&#34;fmt&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>myhttp</span><span class=w> </span><span class=s>&#34;my.org/http&#34;</span><span class=w> </span><span class=c1>// 将 my.org/http 包重命名为 myhttp
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>stdhttp</span><span class=w> </span><span class=s>&#34;net/http&#34;</span><span class=w>   </span><span class=c1>// 将 net/http 包重命名为 stdhttp
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>stdhttp</span><span class=p>.</span><span class=n>Get</span><span class=p>(</span><span class=s>&#34;http://example.com&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>myhttp</span><span class=p>.</span><span class=n>MyFunction</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=11避免包名和内建类型冲突可以使用复数><strong>11、避免包名和内建类型冲突，可以使用复数</strong></h4><p><strong>示例:</strong></p><ul><li><p><code>bytes</code>: 操作字节切片。</p></li><li><p><code>strings</code>: 操作字符串。</p></li><li><p><code>maps</code>: 扩展的map操作。</p></li><li><p><code>slices</code>: 扩展的slice操作。</p></li></ul><h3 id=变量命名>变量命名</h3><h4 id=12-bool类型变量名应带有ishascan等前缀><strong>12、 bool类型变量名应带有</strong><code>is</code><strong>、</strong><code>has</code><strong>、</strong><code>can</code><strong>等前缀</strong></h4><p>使用这些前缀可以清晰地表达变量的布尔含义。例如：</p><ul><li><p><code>isValid</code>：表示某个值是否有效。</p></li><li><p><code>hasPermission</code>：表示是否拥有某个权限。</p></li><li><p><code>canAccess</code>：表示是否可以访问某个资源。</p></li><li><p><code>isFinished</code>：表示某个操作是否完成。</p></li><li><p><code>hasError</code>：表示是否发生错误。</p></li></ul><h4 id=13-切片名称用复数形式如usersports><strong>13、 切片名称用复数形式，如</strong><code>users</code><strong>、</strong><code>ports</code></h4><p>使用复数形式可以清晰地表明变量存储的是一个集合。例如：</p><ul><li><p><code>users</code>：存储用户信息的切片。</p></li><li><p><code>ports</code>：存储端口号的切片。</p></li><li><p><code>messages</code>：存储消息的切片。</p></li><li><p><code>results</code>：存储结果的切片。</p></li></ul><h4 id=14-指针变量不需要带ptr前缀><strong>14、 指针变量不需要带</strong><code>ptr</code><strong>前缀</strong></h4><p>Go语言中，类型信息已经足够表明一个变量是否为指针，因此不需要额外的 <code>ptr</code> 前缀。直接使用变量名即可，例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>var</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=o>*</span><span class=n>User</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>user</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>newUser</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>name</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=n>Name</span><span class=w> </span><span class=c1>// 直接使用 user.Name，无需 ptrUser.Name
</span></span></span></code></pre></div><h4 id=15-接收者名称应简短通常用类型首字母再不济用两个字母简写><strong>15、 接收者名称应简短，通常用类型首字母，再不济用两个字母简写</strong></h4><p>在方法定义中，接收者名称应该简短，通常使用类型名的首字母。例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>type</span> <span class=nc>User</span><span class=w> </span><span class=k>struct</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Name</span><span class=w> </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=p>(</span><span class=n>u</span><span class=w> </span><span class=n>User</span><span class=p>)</span><span class=w> </span><span class=n>GetName</span><span class=p>()</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// 接收者 u
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>type</span> <span class=nc>File</span><span class=w> </span><span class=k>struct</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>fd</span><span class=w> </span><span class=n>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=w> </span><span class=n>File</span><span class=p>)</span><span class=w> </span><span class=n>Close</span><span class=p>()</span><span class=w> </span><span class=n>error</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// 接收者 f
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=16-中间结果用有意义的名称避免result1result2><strong>16、 中间结果用有意义的名称，避免</strong><code>result1</code><strong>、</strong><code>result2</code></h4><p>使用有意义的名称可以提高代码的可读性。例如，不要使用：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>result1</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>calculateValue</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>result2</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>processResult</span><span class=p>(</span><span class=n>result1</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><p>而应该使用：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>calculatedValue</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>calculateValue</span><span class=p>(</span><span class=n>x</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>processedValue</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>processResult</span><span class=p>(</span><span class=n>calculatedValue</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><p>或者更具上下文的简短名称：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>sum</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>calculateSum</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>average</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>calculateAverage</span><span class=p>(</span><span class=n>sum</span><span class=p>,</span><span class=w> </span><span class=n>len</span><span class=p>(</span><span class=n>numbers</span><span class=p>))</span><span class=w>
</span></span></span></code></pre></div><h4 id=17-全局变量一般不添加前缀><strong>17、 全局变量一般不添加前缀</strong></h4><p>不像其他编程语言，Go语言一般不为全局变量添加前缀。例如下面的写法在地道的Go程序较少见：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>var</span><span class=w> </span><span class=n>gLogger</span><span class=w> </span><span class=o>*</span><span class=n>log</span><span class=p>.</span><span class=n>Logger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>var</span><span class=w> </span><span class=n>gConfig</span><span class=w> </span><span class=o>*</span><span class=n>Config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=n>init</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>gLogger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>log</span><span class=p>.</span><span class=n>New</span><span class=p>(</span><span class=n>os</span><span class=p>.</span><span class=n>Stdout</span><span class=p>,</span><span class=w> </span><span class=s>&#34;MYAPP: &#34;</span><span class=p>,</span><span class=w> </span><span class=n>log</span><span class=p>.</span><span class=n>LstdFlags</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>gConfig</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>loadConfig</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=18-接口实现者命名可以使用接口名做后缀><strong>18、 接口实现者命名可以使用接口名做后缀</strong></h4><p>这是一个常见的约定，可以清晰地表明某个类型实现了哪个接口。例如：</p><ul><li><p><code>io.Reader</code> 接口的实现类型可以命名为 <code>FileReader</code>、<code>BufReader</code>、<code>StringReader</code> 等。</p></li><li><p><code>http.Handler</code> 接口的实现类型可以命名为 <code>MyHandler</code>、<code>UserHandler</code> 等。</p></li></ul><h3 id=函数方法命名>函数/方法命名</h3><h4 id=19set前缀用于属性访问一般不使用getxxx而是直接xxx命名属性读取方法><strong>19、</strong><code>Set</code><strong>前缀用于属性访问，一般不使用</strong><code>GetXXX()</code><strong>，而是直接</strong><code>XXX()</code><strong>命名属性读取方法</strong></h4><p>在Go中，对于属性的设置使用 <code>Set</code> 前缀，而读取则直接使用属性名作为方法名。例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>func</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=w> </span><span class=o>*</span><span class=n>IPConn</span><span class=p>)</span><span class=w> </span><span class=n>SetDeadline</span><span class=p>(</span><span class=n>t</span><span class=w> </span><span class=n>time</span><span class=p>.</span><span class=n>Time</span><span class=p>)</span><span class=w> </span><span class=n>error</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=w> </span><span class=o>*</span><span class=n>IPConn</span><span class=p>)</span><span class=w> </span><span class=n>SetReadBuffer</span><span class=p>(</span><span class=n>bytes</span><span class=w> </span><span class=n>int</span><span class=p>)</span><span class=w> </span><span class=n>error</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=w> </span><span class=o>*</span><span class=n>IPConn</span><span class=p>)</span><span class=w> </span><span class=n>SetReadDeadline</span><span class=p>(</span><span class=n>t</span><span class=w> </span><span class=n>time</span><span class=p>.</span><span class=n>Time</span><span class=p>)</span><span class=w> </span><span class=n>error</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=w> </span><span class=o>*</span><span class=n>IPConn</span><span class=p>)</span><span class=w> </span><span class=n>SetWriteBuffer</span><span class=p>(</span><span class=n>bytes</span><span class=w> </span><span class=n>int</span><span class=p>)</span><span class=w> </span><span class=n>error</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=w> </span><span class=o>*</span><span class=n>IPConn</span><span class=p>)</span><span class=w> </span><span class=n>SetWriteDeadline</span><span class=p>(</span><span class=n>t</span><span class=w> </span><span class=n>time</span><span class=p>.</span><span class=n>Time</span><span class=p>)</span><span class=w> </span><span class=n>error</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=w> </span><span class=o>*</span><span class=n>TCPAddr</span><span class=p>)</span><span class=w> </span><span class=n>AddrPort</span><span class=p>()</span><span class=w> </span><span class=n>netip</span><span class=p>.</span><span class=n>AddrPort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=w> </span><span class=o>*</span><span class=n>TCPAddr</span><span class=p>)</span><span class=w> </span><span class=n>Network</span><span class=p>()</span><span class=w> </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=w> </span><span class=o>*</span><span class=n>TCPAddr</span><span class=p>)</span><span class=w> </span><span class=nb>String</span><span class=p>()</span><span class=w> </span><span class=n>string</span><span class=w>
</span></span></span></code></pre></div><h4 id=20new前缀用于构造函数><strong>20、</strong><code>New</code><strong>前缀用于构造函数</strong></h4><p>使用 <code>New</code> 前缀的函数用于创建类型的实例。</p><p>包下面如果只有一个构造函数，那么可以只定义<code>New</code>，如果有多个构造函数，可以使用<code>NewXXXXX</code>明确特定类型的构造函数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>func</span><span class=w> </span><span class=n>New</span><span class=p>(</span><span class=n>text</span><span class=w> </span><span class=n>string</span><span class=p>)</span><span class=w> </span><span class=n>error</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=n>NewReader</span><span class=p>(</span><span class=n>rd</span><span class=w> </span><span class=n>io</span><span class=p>.</span><span class=n>Reader</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=n>Reader</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=n>NewReaderSize</span><span class=p>(</span><span class=n>rd</span><span class=w> </span><span class=n>io</span><span class=p>.</span><span class=n>Reader</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=n>int</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=n>Reader</span><span class=w>
</span></span></span></code></pre></div><h4 id=21parse前缀用于解析操作><strong>21、</strong><code>Parse</code><strong>前缀用于解析操作</strong></h4><p>使用 <code>Parse</code> 前缀的函数用于将字符串或其他格式的数据解析成某种类型。例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>num</span><span class=p>,</span><span class=w> </span><span class=n>err</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>strconv</span><span class=p>.</span><span class=n>ParseInt</span><span class=p>(</span><span class=kt>str</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>64</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h4 id=22handle前缀用于处理回调><strong>22、</strong><code>Handle</code><strong>前缀用于处理回调</strong></h4><p>使用 <code>Handle</code> 前缀的函数用于处理事件或回调。例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>func</span><span class=w> </span><span class=n>HandleFunc</span><span class=p>(</span><span class=n>pattern</span><span class=w> </span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=n>handler</span><span class=w> </span><span class=n>func</span><span class=p>(</span><span class=n>ResponseWriter</span><span class=p>,</span><span class=w> </span><span class=o>*</span><span class=n>Request</span><span class=p>))</span><span class=w>
</span></span></span></code></pre></div><h4 id=23-测试函数用test前缀加被测函数名><strong>23、 测试函数用</strong><code>Test</code><strong>前缀加被测函数名</strong></h4><p>Go的测试框架要求测试函数以 <code>Test</code> 开头，后面是被测函数的名称。例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>func</span><span class=w> </span><span class=n>Add</span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>int</span><span class=p>)</span><span class=w> </span><span class=n>int</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>b</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=n>TestAdd</span><span class=p>(</span><span class=n>t</span><span class=w> </span><span class=o>*</span><span class=n>testing</span><span class=p>.</span><span class=n>T</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=n>Add</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>t</span><span class=p>.</span><span class=n>Error</span><span class=p>(</span><span class=s>&#34;Add(2, 3) should be 5&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=24-基准测试用benchmark前缀><strong>24、 基准测试用</strong><code>Benchmark</code><strong>前缀</strong></h4><p>基准测试函数以 <code>Benchmark</code> 开头。例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>func</span><span class=w> </span><span class=n>BenchmarkAdd</span><span class=p>(</span><span class=n>b</span><span class=w> </span><span class=o>*</span><span class=n>testing</span><span class=p>.</span><span class=n>B</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=n>i</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>N</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Add</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=25-方法名应体现动作或者功能如converttostring而不是conversion除非是读取属性方法><strong>25、 方法名应体现动作或者功能，如</strong><code>convertToString</code><strong>而不是</strong><code>conversion</code><strong>，除非是读取属性方法</strong></h4><p>方法名应该清晰地表达方法的功能。使用动词或动词短语，例如：</p><ul><li><p><code>convertToString()</code>：将某个值转换为字符串。</p></li><li><p><code>calculateSum()</code>：计算总和。</p></li><li><p><code>sendMessage()</code>：发送消息。</p></li></ul><p>而不是使用名词，例如 <code>conversion</code>、<code>calculation</code>、<code>message</code>。但是读取属性的方法可以直接使用属性名，如前文所述的 <code>Name()</code>。</p><h4 id=26-避免无意义的命名比如仅仅使用handleprocessdo标准库这样写除外><strong>26. 避免无意义的命名，比如仅仅使用</strong><code>Handle</code><strong>、</strong><code>Process</code><strong>、</strong><code>Do</code><strong>，标准库这样写除外</strong></h4><p>除非在非常通用的上下文中，否则应避免使用过于笼统的命名，例如仅仅使用 <code>Handle</code>、<code>Process</code>、<code>Do</code>。应该根据具体的功能使用更具描述性的名称。例如，与其使用 <code>HandleData()</code>，不如使用 <code>ProcessUserData()</code> 或 <code>ValidateInputData()</code>。标准库中一些非常底层的包，由于其通用性，可能会使用这些简单的命名，如<code>func (c *Client) Do(req *Request) (*Response, error)</code>，但一般情况下我们应该避免。</p><h4 id=27和第12条一样-返回值是bool类型的函数名应带有ishascan等前缀>27、和第12条一样， 返回值是bool类型的函数名<strong>应带有</strong><code>is</code><strong>、</strong><code>has</code><strong>、</strong><code>can</code><strong>等前缀</strong></h4><p>个别函数例如，如<code>Equal</code>。</p><h4 id=28函数一般使用动词原型><strong>28、函数一般使用动词原型</strong></h4><p>比如使用<code>Equal</code>而不是<code>Equals</code>，使用<code>Get</code>而不是<code>Gets</code>。</p><h4 id=29单词倾向于使用美式写法><strong>29、单词倾向于使用美式写法</strong></h4><table><thead><tr><th style=text-align:left><strong>美式拼写</strong></th><th style=text-align:left><strong>英式拼写</strong></th></tr></thead><tbody><tr><td style=text-align:left>Marshal, UnMarshal</td><td style=text-align:left>Marshall, Unmarshall</td></tr><tr><td style=text-align:left>color, flavor, neighbor, rumor</td><td style=text-align:left>colour, flavour, neighbour, rumour</td></tr><tr><td style=text-align:left>center, fiber, meter</td><td style=text-align:left>centre, fibre, metre</td></tr><tr><td style=text-align:left>analyze, organize, realize</td><td style=text-align:left>analyse/analyze, organise/organize, realise/realize</td></tr><tr><td style=text-align:left>traveling, traveling, labeled</td><td style=text-align:left>travelling, travelling, labelled</td></tr><tr><td style=text-align:left>program, draft</td><td style=text-align:left>programme, draught</td></tr><tr><td style=text-align:left>adapter</td><td style=text-align:left>adaptor</td></tr></tbody></table><h3 id=结构体命名>结构体命名</h3><h4 id=30名称应该是名词或名词短语><strong>30、名称应该是名词或名词短语</strong></h4><p>结构体的名称应该清晰地描述它所代表的事物或概念，因此应该使用名词或名词短语。例如：</p><ul><li><p><code>User</code>：表示一个用户。</p></li><li><p><code>Product</code>：表示一个产品。</p></li><li><p><code>Order</code>：表示一个订单。</p></li><li><p><code>CustomerAddress</code>：表示客户地址。</p></li><li><p><code>FileData</code>：表示文件数据。</p></li></ul><p>避免使用动词或形容词作为结构体名称，例如 <code>RunningProcess</code> 或 <code>ImportantData</code>。</p><h4 id=31尽量使用单个单词适当采用缩写众所周知的缩写><strong>31、尽量使用单个单词，适当采用缩写（众所周知的缩写）</strong></h4><p>能用一个单词能表达的就用一个单词，或者一个单词加实现的接口名，杜绝非常多的单词组成的结构名。</p><p>广为人知的缩写可以使用，例如 <code>HTML</code>、<code>URL</code>、<code>ID</code>、<code>API</code> 等。</p><p>一些结构体名称：</p><ul><li><p><code>Buffer</code></p></li><li><p><code>LimitedReader</code></p></li><li><p><code>HTMLDoc</code>而不是<code>HyperTextMarkupLanguageDocument</code></p></li><li><p><code>Cond</code>而不是<code>ConditionVariable</code></p></li></ul><h4 id=32保持一致性><strong>32、保持一致性</strong></h4><p>在一个项目中，应该保持结构体命名的一致性。例如，如果使用 <code>User</code> 表示用户，则不要在其他地方使用 <code>Person</code> 或 <code>Member</code> 表示相同的概念。</p><h3 id=接口命名>接口命名</h3><h4 id=33多方法接口用名词描述其功能><strong>33、多方法接口用名词描述其功能</strong></h4><p>如果一个接口包含多个方法，则应该使用名词或形容词来描述接口的功能或特性。例如：</p><ul><li><p><code>ReadWriteCloser</code>：包含 <code>Read()</code>、<code>Write()</code> 和 <code>Close()</code> 方法。</p></li><li><p><code>HTTPHandler</code>：处理 HTTP 请求的接口。</p></li><li><p><code>Encoding</code>：定义编码/解码操作的接口。</p></li><li><p><code>Iterator</code>：定义迭代器行为的接口。</p></li><li><p><code>Ordered</code>：定义了可排序行为的接口。这里的<code>Ordered</code>更多的是名词的意思(<code>OrderedObject</code>)</p></li></ul><p>避免在这种情况下使用 <code>动词+er</code> 的形式，因为这可能会导致接口名称过于冗长或难以理解。 只对单一方法接口的命名<code>动词+er</code>采用形式。</p><p>较少使用形容词，比如优先使用<code>Iterator</code>，而不是<code>Iterable</code>。</p><h4 id=34避免使用i或interface前缀><strong>34、避免使用</strong><code>I</code><strong>或</strong><code>Interface</code><strong>前缀</strong></h4><p>在 Go 语言中，不推荐使用 <code>I</code> 或 <code>Interface</code> 前缀来命名接口。例如，不要使用 <code>IReader</code> 或 <code>ReaderInterface</code>，而应该直接使用 <code>Reader</code>。Go 语言的类型系统已经足够清晰，不需要额外的 <code>I</code> 或 <code>Interface</code> 前缀来表明一个类型是接口。</p><h3 id=类型别名命名>类型别名命名</h3><h4 id=35如果是包级别的类型名称要足够特异><strong>35、如果是包级别的类型，名称要足够特异</strong></h4><p>对于包级别的类型别名，名称尤其需要具有独特性，以避免与其他包或类型产生混淆。这意味着名称应该清晰地表达别名所代表的类型，并尽可能避免使用过于通用的名称：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>package</span><span class=w> </span><span class=n>network</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>import</span><span class=w> </span><span class=s>&#34;net/http&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// Bad: MyCustomRequest 是 http.Request 的类型别名，用于表示自定义的请求类型
</span></span></span><span class=line><span class=cl><span class=c1>// 仅仅使用 MyCustomRequest 可能不够清晰，因为其他包也可能定义类似的别名。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>type</span> <span class=nc>MyCustomRequest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>http</span><span class=p>.</span><span class=n>Request</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 更好的方式：添加更具特异性的前缀或后缀
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>type</span> <span class=nc>NetworkRequest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>http</span><span class=p>.</span><span class=n>Request</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>type</span> <span class=nc>InternalRequest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>http</span><span class=p>.</span><span class=n>Request</span><span class=w> </span><span class=c1>//如果仅在包内部使用
</span></span></span></code></pre></div><h4 id=36考虑添加适当后缀表明其特性><strong>36、考虑添加适当后缀表明其特性</strong></h4><p>为了进一步提高类型别名的可读性和可理解性，可以考虑添加适当的后缀来表明其特性或用途。</p><p>一些常用的后缀包括：</p><ul><li><p><code>Type</code>: 用于强调这是一个类型别名。例如 <code>RequestType</code>。</p></li><li><p><code>Alias</code>: 明确表明这是一个别名。例如 <code>RequestAlias</code>。</p></li><li><p><code>Func</code>: 用于函数类型别名。例如 <code>HandlerFunc</code>。</p></li><li><p><code>List</code>: 用于表示某种类型的列表。例如 <code>UserList</code> (虽然通常用 <code>[]User</code>)</p></li></ul><h3 id=嵌入字段命名>嵌入字段命名</h3><h4 id=37匿名嵌入使用类型名称><strong>37、匿名嵌入使用类型名称</strong></h4><p>当一个类型被匿名地嵌入到另一个类型中时，该类型的名称就成为了嵌入字段的名称。这意味着你可以直接通过外部类型的实例访问嵌入类型的字段和方法。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>type</span> <span class=nc>Address</span><span class=w> </span><span class=k>struct</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Street</span><span class=w>  </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>City</span><span class=w>    </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ZipCode</span><span class=w> </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>type</span> <span class=nc>User</span><span class=w> </span><span class=k>struct</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Name</span><span class=w>    </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Address</span><span class=w> </span><span class=c1>// 匿名嵌入 Address 类型
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=38命名嵌入使用有意义的字段名><strong>38、命名嵌入使用有意义的字段名</strong></h4><p>当使用命名嵌入时，需要为嵌入的类型指定一个字段名。这个字段名应该清晰地描述嵌入类型的用途或角色。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>type</span> <span class=nc>Author</span><span class=w> </span><span class=k>struct</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Name</span><span class=w> </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Bio</span><span class=w>  </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>type</span> <span class=nc>Book</span><span class=w> </span><span class=k>struct</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Title</span><span class=w>  </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Author</span><span class=w> </span><span class=n>Author</span><span class=w> </span><span class=err>`</span><span class=n>json</span>:<span class=s>&#34;author&#34;</span><span class=err>`</span><span class=w> </span><span class=c1>// 命名嵌入 Author 类型，字段名为 author
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=39-避免因嵌入导致的名称冲突><strong>39、 避免因嵌入导致的名称冲突</strong></h4><p>当外部类型和嵌入类型具有相同的字段或方法名时，会发生名称冲突。在这种情况下，外部类型的字段或方法会“屏蔽”嵌入类型的同名成员。为了避免混淆，应该尽量避免这种冲突。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>type</span> <span class=nc>Inner</span><span class=w> </span><span class=k>struct</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Value</span><span class=w> </span><span class=n>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Name</span><span class=w> </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>type</span> <span class=nc>Outer</span><span class=w> </span><span class=k>struct</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Value</span><span class=w> </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Inner</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>outer</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>Outer</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Value</span>: <span class=s>&#34;outer value&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Inner</span>: <span class=nc>Inner</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Value</span>: <span class=mi>10</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Name</span>: <span class=s>&#34;inner name&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>},</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>println</span><span class=p>(</span><span class=n>outer</span><span class=p>.</span><span class=n>Value</span><span class=p>)</span><span class=w> </span><span class=c1>// 输出：outer value (Outer 的 Value 屏蔽了 Inner 的 Value)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>println</span><span class=p>(</span><span class=n>outer</span><span class=p>.</span><span class=n>Inner</span><span class=p>.</span><span class=n>Value</span><span class=p>)</span><span class=w> </span><span class=c1>// 输出：10,需要通过Outer.Inner.Value访问
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>println</span><span class=p>(</span><span class=n>outer</span><span class=p>.</span><span class=n>Name</span><span class=p>)</span><span class=w> </span><span class=c1>// 输出：inner name
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=40考虑可见性要求选择大小写><strong>40、考虑可见性要求选择大小写</strong></h4><p>和其他标识符一样，嵌入字段的可见性也由其首字母的大小写决定。</p><ul><li><p>首字母大写的嵌入字段是导出的（public），可以被其他包访问。</p></li><li><p>首字母小写的嵌入字段是非导出的（private），只能在当前包内部访问。</p></li></ul><h3 id=error类型命名>Error类型命名</h3><h4 id=41-错误变量以err或error为前缀><strong>41、 错误变量以</strong><code>Err</code><strong>或</strong><code>Error</code><strong>为前缀</strong></h4><p>在包级别定义的错误变量（通常是哨兵错误），应该以 <code>Err</code> 或 <code>Error</code> 为前缀。这有助于清晰地标识这些变量表示的是错误。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>var</span><span class=w> </span><span class=n>ErrClosedPipe</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>errors</span><span class=p>.</span><span class=n>New</span><span class=p>(</span><span class=s>&#34;io: read/write on closed pipe&#34;</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h4 id=42自定义错误类型以error为后缀><strong>42、自定义错误类型以</strong><code>Error</code><strong>为后缀</strong></h4><p>当需要定义包含更多信息的自定义错误类型时，应该使用结构体或其他类型，并实现 <code>error</code> 接口。自定义错误类型的名称应该以 <code>Error</code> 为后缀。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>type</span> <span class=nc>InputError</span><span class=w> </span><span class=k>struct</span><span class=p>{</span><span class=w> </span><span class=o>..</span><span class=p>.</span><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>type</span> <span class=nc>onceError</span><span class=w> </span><span class=k>struct</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>sync</span><span class=p>.</span><span class=n>Mutex</span><span class=w> </span><span class=c1>// guards following
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>	</span><span class=n>err</span><span class=w>        </span><span class=n>error</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=43wrap-错误时保持原始错误信息的语义><strong>43、wrap 错误时保持原始错误信息的语义</strong></h4><p>使用 <code>fmt.Errorf</code> 的 <code>%w</code> 动词或第三方库（如 <code>errors</code> 包）进行错误包装时，应该尽量保持原始错误信息的语义，避免信息丢失或误导。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>package</span><span class=w> </span><span class=n>mypackage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>import</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=s>&#34;fmt&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=s>&#34;os&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=n>ReadFile</span><span class=p>(</span><span class=n>filename</span><span class=w> </span><span class=n>string</span><span class=p>)</span><span class=w> </span><span class=n>error</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>_</span><span class=p>,</span><span class=w> </span><span class=n>err</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>os</span><span class=p>.</span><span class=n>ReadFile</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=n>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>nil</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 正确的 wrap 方式，保留了原始错误信息
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>fmt</span><span class=p>.</span><span class=n>Errorf</span><span class=p>(</span><span class=s>&#34;reading file %s: %w&#34;</span><span class=p>,</span><span class=w> </span><span class=n>filename</span><span class=p>,</span><span class=w> </span><span class=n>err</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 不好的 wrap 方式，丢失了原始错误信息
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>        </span><span class=c1>// return fmt.Errorf(&#34;failed to read file&#34;)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>nil</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>正确的 wrap 方式保留了 <code>os.ReadFile</code> 返回的原始错误信息，方便调试和排查问题。</p><h4 id=44-错误字符串首字母不大写不用标点结尾><strong>44、 错误字符串首字母不大写，不用标点结尾</strong></h4><p>错误字符串应该使用小写字母开头，并且不要使用标点符号结尾。这是 Go 语言的惯例。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>package</span><span class=w> </span><span class=n>mypackage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>import</span><span class=w> </span><span class=s>&#34;errors&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>var</span><span class=w> </span><span class=n>ErrInvalidInput</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>errors</span><span class=p>.</span><span class=n>New</span><span class=p>(</span><span class=s>&#34;invalid input&#34;</span><span class=p>)</span><span class=w> </span><span class=c1>// 正确：小写开头，没有标点
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 不好的例子：
</span></span></span><span class=line><span class=cl><span class=c1>// var ErrInvalidInput = errors.New(&#34;Invalid input.&#34;) // 大写开头，有句点
</span></span></span><span class=line><span class=cl><span class=c1>// var ErrInvalidInput = errors.New(&#34;INVALID INPUT&#34;) // 全部大写
</span></span></span></code></pre></div><h3 id=常量命名>常量命名</h3><p>Go 语言中，常量使用 <code>const</code> 关键字声明。常量名通常使用驼峰式，而不是全大写加下划线。</p><h4 id=45枚举常量使用分组前缀如colorredcolorblue><strong>45、枚举常量使用分组前缀，如</strong><code>ColorRed</code><strong>、</strong><code>ColorBlue</code></h4><p>当定义一组相关的常量，用于表示枚举值时，应该使用一个共同的前缀来分组这些常量。这有助于清晰地标识这些常量属于同一个枚举类型。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>package</span><span class=w> </span><span class=n>mypackage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ColorRed</span><span class=w>   </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ColorGreen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ColorBlue</span><span class=w>  </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>FileModeRead</span><span class=w>  </span><span class=o>=</span><span class=w> </span><span class=mi>0400</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>FileModeWrite</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0200</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>FileModeExec</span><span class=w>  </span><span class=o>=</span><span class=w> </span><span class=mi>0100</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><p>除非是众所周知的常量，如星期名，月份名、性别等等。</p><h4 id=46状态常量用state前缀如stateactive><strong>46、状态常量用</strong><code>State</code><strong>前缀，如</strong><code>StateActive</code></h4><p>当定义一组常量来表示某个对象或系统的不同状态时，应该使用 <code>State</code> 前缀。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>package</span><span class=w> </span><span class=n>mypackage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>StateActive</span><span class=w>   </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>StateInactive</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>StatePending</span><span class=w>  </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><p>在这个例子中，<code>StateActive</code>、<code>StateInactive</code> 和 <code>StatePending</code> 使用了 <code>State</code> 前缀，清晰地表明它们表示不同的状态。</p><h4 id=47配置相关常量用config前缀><strong>47、配置相关常量用</strong><code>Config</code><strong>前缀</strong></h4><p>当定义一些用于配置系统的常量时，应该使用 <code>Config</code> 前缀。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>package</span><span class=w> </span><span class=n>mypackage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ConfigMaxConnections</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ConfigDefaultTimeout</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>30</span><span class=w> </span><span class=c1>// seconds
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h4 id=48魔法数字转为常量时用maxmindefault等前缀><strong>48、魔法数字转为常量时用</strong><code>Max</code><strong>、</strong><code>Min</code><strong>、</strong><code>Default</code><strong>等前缀</strong></h4><p>当代码中出现一些难以理解的“魔法数字”时，应该将其定义为常量，并使用 <code>Max</code>、<code>Min</code>、<code>Default</code> 等前缀来描述其含义。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>package</span><span class=w> </span><span class=n>mypackage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>MaxUserNameLength</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>50</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>MinPasswordLength</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>8</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>DefaultPageSize</span><span class=w>   </span><span class=o>=</span><span class=w> </span><span class=mi>20</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 不好的例子：直接使用魔法数字
</span></span></span><span class=line><span class=cl><span class=c1>// if len(userName) &gt; 50 { ... }
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 好的例子：使用常量
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>if</span><span class=w> </span><span class=n>len</span><span class=p>(</span><span class=n>userName</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>MaxUserNameLength</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=49-私有常量可以使用小写但要保持包内一致性><strong>49、 私有常量可以使用小写，但要保持包内一致性</strong></h4><p>虽然 Go 语言的惯例是使用大写字母命名常量，但对于只在包内部使用的私有常量，可以使用小写字母。但是，在一个包内应该保持一致性，要么全部使用大写，要么全部使用小写。推荐使用大写，除非有特殊原因。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>package</span><span class=w> </span><span class=n>mypackage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>maxInternalValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=c1>// 私有常量，小写
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>MinInternalValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=c1>// Bad: 同一个包内，也应该用小写，保持一致性
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h3 id=枚举类型命名>枚举类型命名</h3><h4 id=50定义一个基础类型><strong>50、定义一个基础类型</strong></h4><p>需要定义一个基础类型来表示枚举值。通常使用整数类型（如 <code>int</code>、<code>int8</code>、<code>int16</code>、<code>int32</code>、<code>int64</code>）或字符串类型。</p><ul><li><p><strong>使用整数类型：</strong> 如果枚举值只是简单的标识符，没有其他关联的数据，则通常使用整数类型。</p></li><li><p><strong>使用字符串类型：</strong> 如果枚举值需要更具描述性的字符串表示，或者需要与其他系统进行交互，则可以使用字符串类型。</p></li></ul><h4 id=51使用常量组定义枚举值><strong>51、使用常量组定义枚举值</strong></h4><p>使用 <code>const</code> 关键字和分组声明来定义枚举值。这有助于将相关的常量组织在一起，提高代码的可读性。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>type</span> <span class=nc>Color</span><span class=w> </span><span class=n>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ColorRed</span><span class=w> </span><span class=n>Color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>iota</span><span class=w> </span><span class=c1>// 0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>ColorGreen</span><span class=w>        </span><span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>ColorBlue</span><span class=w>         </span><span class=c1>// 2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 使用 iota 的偏移量
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>type</span> <span class=nc>ByteSize</span><span class=w> </span><span class=n>float64</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>_</span><span class=w>           </span><span class=o>=</span><span class=w> </span><span class=n>iota</span><span class=w> </span><span class=c1>// ignore first value by assigning to blank identifier
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=no>KB</span><span class=w> </span><span class=n>ByteSize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=p>(</span><span class=mi>10</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>iota</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=no>MB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=no>GB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=no>TB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=no>PB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=no>EB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=no>ZB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=no>YB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h4 id=52使用分组前缀><strong>52、使用分组前缀</strong></h4><p>使用一个共同的前缀来分组枚举常量，清晰地表明它们属于同一个枚举类型。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>type</span> <span class=nc>Color</span><span class=w> </span><span class=n>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ColorRed</span><span class=w>   </span><span class=n>Color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>iota</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ColorGreen</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ColorBlue</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h4 id=53为枚举类型定义-string-方法><strong>53、为枚举类型定义 String() 方法</strong></h4><p>为了方便打印和调试，应该为枚举类型定义 <code>String()</code> 方法，使其能够返回枚举值的字符串表示。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>package</span><span class=w> </span><span class=n>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>import</span><span class=w> </span><span class=s>&#34;fmt&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>type</span> <span class=nc>Color</span><span class=w> </span><span class=n>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ColorRed</span><span class=w>   </span><span class=n>Color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>iota</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ColorGreen</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ColorBlue</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=w> </span><span class=n>Color</span><span class=p>)</span><span class=w> </span><span class=nb>String</span><span class=p>()</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>switch</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>case</span><span class=w> </span><span class=n>ColorRed</span>:
</span></span><span class=line><span class=cl>        <span class=nc>return</span><span class=w> </span><span class=s>&#34;Red&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>case</span><span class=w> </span><span class=n>ColorGreen</span>:
</span></span><span class=line><span class=cl>        <span class=nc>return</span><span class=w> </span><span class=s>&#34;Green&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>case</span><span class=w> </span><span class=n>ColorBlue</span>:
</span></span><span class=line><span class=cl>        <span class=nc>return</span><span class=w> </span><span class=s>&#34;Blue&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>default</span>:
</span></span><span class=line><span class=cl>        <span class=nc>return</span><span class=w> </span><span class=n>fmt</span><span class=p>.</span><span class=n>Sprintf</span><span class=p>(</span><span class=s>&#34;Color(%d)&#34;</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=c1>// 处理未知值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>func</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>fmt</span><span class=p>.</span><span class=n>Println</span><span class=p>(</span><span class=n>ColorRed</span><span class=p>)</span><span class=w>   </span><span class=c1>// 输出: Red
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>fmt</span><span class=p>.</span><span class=n>Println</span><span class=p>(</span><span class=n>ColorGreen</span><span class=p>)</span><span class=w> </span><span class=c1>// 输出: Green
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>fmt</span><span class=p>.</span><span class=n>Println</span><span class=p>(</span><span class=n>ColorBlue</span><span class=p>)</span><span class=w>  </span><span class=c1>// 输出: Blue
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>fmt</span><span class=p>.</span><span class=n>Println</span><span class=p>(</span><span class=n>Color</span><span class=p>(</span><span class=mi>4</span><span class=p>))</span><span class=w> </span><span class=c1>// 输出: Color(4)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>可以使用<code>dmarkham/enumer</code>、<code>abice/go-enum</code>等一些工具辅助代码生成。</p><h4 id=54使用类型别名提高可读性><strong>54、使用类型别名提高可读性</strong></h4><p>可以使用类型别名来简化枚举类型的声明，尤其是在枚举类型名较长的情况下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>type</span> <span class=nc>AudioSampleRate</span><span class=w> </span><span class=n>uint32</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>AudioSampleRate44100</span><span class=w> </span><span class=n>AudioSampleRate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>44100</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>AudioSampleRate48000</span><span class=w> </span><span class=n>AudioSampleRate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>48000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 可以使用类型别名简化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>type</span> <span class=nc>ASR</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>AudioSampleRate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=no>ASR44100</span><span class=w> </span><span class=no>ASR</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>44100</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=no>ASR48000</span><span class=w> </span><span class=no>ASR</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>48000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h4 id=55避免使用零值作为有效的枚举值><strong>55、避免使用零值作为有效的枚举值</strong></h4><p>通常情况下，应该避免使用零值作为有效的枚举值，以便能够区分未初始化的枚举值和有效的枚举值。如果需要表示“未设置”或“默认”状态，可以定义一个特殊的枚举值，例如 <code>ColorUnknown</code> 或 <code>StatusDefault</code>。</p><h4 id=56使用_跳过iota的某些值><strong>56、使用</strong><code>_</code><strong>跳过</strong><code>iota</code><strong>的某些值</strong></h4><p>可以使用空白标识符 <code>_</code> 来跳过 <code>iota</code> 生成的某些值。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>type</span> <span class=nc>SpecialErrorCode</span><span class=w> </span><span class=n>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>const</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>_</span><span class=w>                </span><span class=n>SpecialErrorCode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>iota</span><span class=w> </span><span class=c1>// 0 (被跳过)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>ErrorCodeOne</span><span class=w>                           </span><span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>ErrorCodeTwo</span><span class=w>                           </span><span class=c1>// 2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>ErrorCodeThree</span><span class=w>                         </span><span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h3 id=注释>注释</h3><h4 id=57文件注释><strong>57、文件注释</strong></h4><p>位于文件顶部，描述文件的用途、作者、版权信息等。</p><p>常常使用<code>/* ... */</code>且多行的形式。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>Copyright 2024 The MyProject Authors. All rights reserved.
</span></span></span><span class=line><span class=cl><span class=cm>Use of this source code is governed by a BSD-style
</span></span></span><span class=line><span class=cl><span class=cm>license that can be found in the LICENSE file.
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>package</span><span class=w> </span><span class=n>mypackage</span><span class=w>
</span></span></span></code></pre></div><h4 id=58包注释><strong>58、包注释</strong></h4><p>位于 <code>package</code> 声明之前，简要描述包的功能，以单词<code>Package</code>开始，后接包名。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=c1>// Package mypackage provides functions for ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>package</span><span class=w> </span><span class=n>mypackage</span><span class=w>
</span></span></span></code></pre></div><h4 id=59函数方法注释文档注释><strong>59、函数/方法注释（文档注释）</strong></h4><p>位于函数或方法声明之前，使用 <code>//</code> 或 <code>/* ... */</code>，但推荐使用 <code>//</code> 以便 <code>godoc</code> 工具生成文档。</p><p>以函数名或者方法名开头。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=c1>// Add adds two integers and returns their sum.
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Example:
</span></span></span><span class=line><span class=cl><span class=c1>//    sum := Add(1, 2) // sum is 3
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Parameters:
</span></span></span><span class=line><span class=cl><span class=c1>//    a: The first integer.
</span></span></span><span class=line><span class=cl><span class=c1>//    b: The second integer.
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Returns:
</span></span></span><span class=line><span class=cl><span class=c1>//    The sum of a and b.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>func</span><span class=w> </span><span class=n>Add</span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>int</span><span class=p>)</span><span class=w> </span><span class=n>int</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>b</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=60类型注释><strong>60、类型注释</strong></h4><p>位于类型声明之前，以类型名开头，常常使用 <code>//</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=c1>// User represents a user in the system.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>type</span> <span class=nc>User</span><span class=w> </span><span class=k>struct</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Name</span><span class=w> </span><span class=n>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Age</span><span class=w>  </span><span class=n>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=61代码块注释><strong>61、代码块注释</strong></h4><p>解释一段代码的逻辑, 常常使用 <code>//</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=c1>// Calculate the average of the numbers.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>sum</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>for</span><span class=w> </span><span class=n>_</span><span class=p>,</span><span class=w> </span><span class=n>num</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>range</span><span class=w> </span><span class=n>numbers</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>sum</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>num</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>average</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=n>float64</span><span class=p>(</span><span class=n>sum</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>float64</span><span class=p>(</span><span class=n>len</span><span class=p>(</span><span class=n>numbers</span><span class=p>))</span><span class=w>
</span></span></span></code></pre></div><h4 id=62行尾注释><strong>62、行尾注释</strong></h4><p>位于代码行尾，对该行代码进行简短的解释，如无特殊需求推荐使用 <code>//</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=n>x</span><span class=w> </span>:<span class=o>=</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=c1>// Initialize x to 10
</span></span></span></code></pre></div><h4 id=63通用注释规则><strong>63、通用注释规则</strong></h4><ul><li><p><strong>空格：</strong></p><ul><li><p>单行注释 <code>//</code> 后应有一个空格，例如 <code>// This is a comment</code>。</p></li><li><p>多行注释 <code>/* ... */</code> 的开始和结束符号与注释内容之间也应有空格，例如 <code>/* This is a multi-line comment */</code>。</p></li></ul></li><li><p><strong>句点（结尾标点）：</strong></p><ul><li><p><strong>函数/方法、类型、包、文件注释</strong>等描述性注释，<strong>推荐使用完整的句子</strong>，以句点结尾。这有助于提高可读性，尤其是在使用 <code>godoc</code> 生成文档时。</p></li><li><p><strong>代码块注释和行尾注释</strong>可以根据需要使用句子片段或短语，句点不是强制的，但保持一致性很重要。</p></li></ul></li><li><p><strong>首字母大小写：</strong></p><ul><li><p><strong>函数/方法、类型、包、文件注释</strong>等描述性注释，<strong>首字母应大写</strong>。</p></li><li><p><strong>代码块注释和行尾注释</strong>可以根据需要使用大小写，但保持一致性很重要。</p></li></ul></li><li><p><strong>缩进：</strong> 注释的缩进应与其所注释的代码保持一致，以提高代码的整体可读性。</p></li><li><p><strong>避免嵌套</strong><code>/* ... */</code><strong>注释：</strong> C 风格的多行注释不支持嵌套。如果需要注释掉一段包含多行注释的代码，可以使用 <code>//</code> 进行单行注释。</p></li><li><p>函数名和方法名一般没有参数和返回值的列表解释，而是针对特殊情况进行简单解释。有些公司要求提供参数和返回值的格式说明，这不是Go地道的写法。</p></li></ul></div><div class="row middle-xs"><div class=col-xs-12></div></div><div class=row><div class=col-xs-12></div></div><div id=comments class=utterances><script src=https://utteranc.es/client.js repo=smallnest/rpcx.blog.gitalk issue-term=pathname theme=github-light crossorigin=anonymous async></script></div><div class=site-footer></div></div></div></article><script></script><script type=text/javascript src=/js/text-expand.js></script></body></html>